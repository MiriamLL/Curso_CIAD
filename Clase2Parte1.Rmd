---
title: "Clase 2"
subtitle: "Gráficos"
author: "Miriam Lerma"
date: "Febrero 2021"
output:
  xaringan::moon_reader:
    css: ["default", "metropolis-fonts"]
    nature:
      highlightStyle: github
      highlightLines: true
      countIncrementalSlides: true
      self_contained: true
editor_options: 
  chunk_output_type: console
---
# 1. Intro

La clase es de 2 horas.

Hoy: 

- Teoría  
(porque hacer gráficos, que es ggplot y conceptos básicos para crear gráficos)

- Práctica  
Van a abrir R, crear un gráfico básico y no guarden su script o no cierren R.

- 10 minutos de receso, siesta, café u otros.
También pueden ser para resolver dudas.

- Teoría.  
(cambiar la estética de mis gráficos)

- Práctica.  
Van a cambiar la estética de su gráfico.

Para cerrar:  
Exportar mi grafico

Si da tiempo:
Un poco de inspiración y la infinidad de opciones de gráficos.

---

# Ustedes

- Conocimientos básicos de R (saben abrirlo, cargar paquetes y datos)

- Quieren hacer gráficos con sus datos usando R

---

class: title-slide, inverse, bottom
background-image: url(https://images.unsplash.com/photo-1517697471339-4aa32003c11a?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=755&q=80)
background-size: cover

# Objetivo

- Creen sus primeros gráficos

---

# Créditos

-Todo el material basado en el libro:  
[R4DS, editado por Riva Quiroga](https://r4ds-en-espaniol.netlify.app/)  

-Y el libro de:  
[Bookdown, por Sonia Mendizabal](https://songeo.github.io/introduccion-r-bookdown/)

-Y materiales de RLadies   
[Zero to Hero](https://github.com/rladies/meetup-presentations_freiburg)  
[Recursos en espanol ](https://github.com/rladies/recursos_en_espanol)  
[RdesdeCero por Yanina Bellini](https://github.com/rladies/meetup-presentations_santarosa/blob/master/RdesdeCero)  

-En ingles:  
[IntroduccionToGGplot](https://englelab.gatech.edu/useRguide/introduction-to-ggplot2.html)  
[gg is for Grammar of Graphics](https://pkg.garrickadenbuie.com/trug-ggplot2)

-Imágenes adicionales
[Unsplash](https://unsplash.com/)

---

class: title-slide, inverse, bottom
background-image: url(https://images.unsplash.com/photo-1536331793822-bfa7055b2229?ixlib=rb-1.2.1&ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&auto=format&fit=crop&w=750&q=80)
background-size: cover

# Empecemos!

.right[
Foto de [Unsplash](https://unsplash.com)
]

---

# 1.1. Teoría

El objetivo de un gráfico es comunicar. En ciencia, la idea es brindar información de manera sencilla y fácil de entender.

```{r echo=FALSE, out.height=350}
knitr::include_graphics("http://www.typesofgraphs.com/wp-content/uploads/2015/12/Typesofgraphs.png")
```
  
Source: [VizThinker](https://paldhous.github.io/ucb/2016/dataviz/week2.html)

---

# 1.1. Teoría

Graficar es transformar datos a visualizaciones que varian en tamaño, forma y colores.  

```{r echo=FALSE, out.height=350}
knitr::include_graphics("https://paldhous.github.io/ucb/2016/dataviz/img/class2_1.jpg")
```
  
Source: [VizThinker](https://paldhous.github.io/ucb/2016/dataviz/week2.html)

---

# 1.1. Teoría

Hay muchas maneras de graficar datos, pero hay diferentes maneras de percibirlos.  

```{r echo=FALSE, out.height=350}
knitr::include_graphics("https://paldhous.github.io/ucb/2016/dataviz/img/class2_2.jpg")
```
  
  Source: [VizThinker](https://paldhous.github.io/ucb/2016/dataviz/week2.html)

---

# 1.1. Teoría

Cual es más intuitiva?

```{r echo=FALSE, out.height=350}
knitr::include_graphics("https://paldhous.github.io/ucb/2016/dataviz/img/class2_4.jpg")
```
  
Source: [VizThinker](https://paldhous.github.io/ucb/2016/dataviz/week2.html)

---

# 1.1. Teoría

Cual debo de usar?

Experimentar diferentes gráficas y elegir la que cuente mejor la historia. 

**Tableau Public** creó esta tabla que te da sugerencias de acuerdo a tu tipo de datos que visualización deberías usar. 

```{r echo=FALSE, out.height=300}
knitr::include_graphics("https://paldhous.github.io/ucb/2016/dataviz/img/class2_5.jpg")
```

---

# 1.2. Intro a ggplot

Hay muchos paquetes para hacer gráficos ademas de **ggplot2**. 
- Usaremos **ggplot2** ya que es uno de los mas versátiles  

--
... y del que encuentras más ayuda e inspiración.

---

# 1.2. Como funciona?

Para objetivos prácticos, un gráfico se puede dividir en tres componentes esenciales:  
- **Datos** (data): conjunto de datos compuesto por variables que mapeamos.  
- **Estética** (aes): atributos estéticos del objeto geométrico, posición color, forma, tamaño.
- **Geometría** (geom): objeto geométrico en cuestión. Puntos, lineas, barras?  

El paquete **ggplot** funciona por **capas**, si han usado SIG (sistema de información geográfica) estarán mas familiarizados.

```{r echo=FALSE, out.height=200}
knitr::include_graphics("https://englelab.gatech.edu/useRguide/images/dataviz/ge_geom.png")
```
  
Fuente: [ggplot2 book](https://englelab.gatech.edu/useRguide/working-with-data-overview.html)



---

# 1.3. Practica
## Instalar y cargar

Si no lo tienen instalado:
```{r, eval=FALSE}
install.packages("ggplot2")
install.packages("tidyverse")
install.packages("datos")
```

Cargar paquetes:
```{r, message=FALSE}
library(datos)
library(tidyverse)
library(ggplot2)
```

---

# 1.3. Practica 
## Instalar y cargar

Cargar datos de prueba
```{r}
Prueba<-datos::clima
```


---

# 1.3. Practica 
## Instalar y cargar

Sus graficos van a aparecer en la esquina inferior derecha.
En la pestaña que dice plots.

Si los quieren ver mas grande, pueden picarle a la lupita (zoom).

```{r echo=FALSE, out.height=300}
knitr::include_graphics('https://r4ds-en-espaniol.netlify.app/diagrams_w_text_as_path/es/rstudio-console.svg')
```

---

# 1.3. Practica 
### Agregar datos

```{r, echo=TRUE, eval=FALSE}
ggplot(data=Prueba)
```

--

```{r, fig.height=3, echo=FALSE, include=TRUE, eval=FALSE}
ggplot(data=Prueba)
```

```{r echo=FALSE, out.height=250}
knitr::include_graphics('https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-11-1.png')
```

---

# 1.3. Practica
### Agregar ejes

```{r, echo=TRUE, eval=FALSE}
ggplot(data=Prueba,
       mapping=aes(x=humedad,y=visibilidad))
```

```{r, fig.height=3, echo=FALSE, include=TRUE, eval=FALSE}
ggplot(data=Prueba, 
       mapping=aes(x=humedad,y=visibilidad))
```

```{r echo=FALSE, out.height=250}
knitr::include_graphics('https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-13-1.png')
```

Noten que sus ejes tienen que ser columnas en su tabla.
---

# 1.3. Practica
### Agregar geometría

```{r, echo=TRUE,eval=FALSE}
ggplot(data=Prueba, 
       mapping=aes(x=humedad,y=visibilidad))+
       geom_point() #<<
```
  
```{r, fig.height=3, echo=FALSE, include=TRUE, warning=FALSE, eval=FALSE}
ggplot(data=Prueba, 
       mapping=aes(x=humedad,y=visibilidad))+
       geom_point() #<<
```

```{r echo=FALSE, out.height=250}
knitr::include_graphics('https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-15-1.png')
```

Nota: te salio un warning?
Que dice el warning?
Te avisa que había NAs y que no se incluyeron en el gráfico.

---
class: center, middle

# 1.4. Tipos de gráficos

Hoy veremos: 
-Puntos
-Lineas
-Barras
-Boxplots
-Trayectorias 
-Mapas

... pero hay muchos mas.

```{r echo=FALSE, out.height=300}
knitr::include_graphics("http://www.typesofgraphs.com/wp-content/uploads/2015/12/Typesofgraphs.png")
```

---

# 1.4. Tipos de gráficos
### Gráfico de puntos, diagramas de dispersión, o scatterplot

Datos inventados de camarones, tamaño y densidad del cultivo.
```{r}
Especies<-c('Lito','Lito','Lito','Lito','Lito')
Camarones<-as.data.frame(Especies)
Camarones$Tamanio<-c(2.1,1.9,1.8,1.6,1.5)
Camarones$Densidad<-c(100,200,300,400,500)
```

---

# 1.4. Tipos de gráficos
### Gráfico de puntos

Gráfico de datos inventados de camarones, tamaño y densidad del cultivo.
```{r, echo=TRUE, eval=FALSE}
ggplot(data=Camarones,mapping=aes(x=Tamanio, y=Densidad))+
  geom_point() #<<
```

```{r, fig.height=3, echo=FALSE, include=TRUE, eval=FALSE}
ggplot(data=Camarones,
       mapping=aes(x=Tamanio, y=Densidad))+
  geom_point() #<<
```

```{r echo=FALSE, out.height=250}
knitr::include_graphics('https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-19-1.png')
```

---

# 1.4. Tipos de gráficos
### Gráfico de lineas

Datos inventados de tipo de algas, en meses (tiempo) y densidad (cantidad)
```{r}
Algas<-c('B','E','B','B','B','B','E','B','E','B')
MareaRoja<-as.data.frame(Algas)
MareaRoja$Tiempo<-c(1,2,3,4,5,6,7,8,9,10)
MareaRoja$Cantidad<-c(100,200,300,200,200,300,400,500,700,200)
```

---

# 1.4. Tipos de gráficos
### Gráfico de lineas

Gráfico de datos inventados de tipo de bacterias, meses (tiempo) y densidad (cantidad)
```{r, echo=TRUE, eval=FALSE}
ggplot(data=MareaRoja,mapping=aes(x=Tiempo, y=Cantidad))+
  geom_line() #<<
```

```{r, fig.height=3, echo=FALSE, include=TRUE, eval=FALSE}
ggplot(data=MareaRoja,
       mapping=aes(x=Tiempo, y=Cantidad))+
  geom_line() #<<
```

```{r echo=FALSE, out.height=250}
knitr::include_graphics('https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-22-1.png')
```

---

# 1.4. Tipos de gráficos
### Gráfico de barras

Datos Inventados de microbiota vaginal en mujeres de diferente edad, y densidad (cantidad)
```{r}
Microbiota<-c('B','E','B','B','B','B','E','B','E','B')
Microbiota<-as.data.frame(Microbiota)
Microbiota$Edad<-c(20,25,30,35,40,45,50,55,60,65)
Microbiota$Cantidad<-c(100,200,300,200,200,300,400,500,700,200)
```

---

# 1.4. Tipos de gráficos
### Gráfico de barras

Gráfico de datos inventados
```{r, fig.height=3, echo=TRUE,eval=FALSE}
ggplot(data=Microbiota,mapping=aes(x=Edad, y=Cantidad))+
  geom_bar() #<<
```
Error: stat_count() can only have an x or y aesthetic.
Hay que agregar un argumento porque no sabe que quieres en las barras.

---


# 1.4. Tipos de gráficos
### Gráfico de barras

Gráfico de datos inventados de microbiota por edad y cantidades
```{r, echo=TRUE, eval=FALSE}
ggplot(data=Microbiota,mapping=aes(x=Edad, y=Cantidad))+
  geom_bar(stat='identity') #<<
```

```{r, fig.height=3, echo=FALSE, include=TRUE, eval=FALSE}
ggplot(data=Microbiota,
       mapping=aes(x=Edad, y=Cantidad))+
  geom_bar(stat='identity') #<<
```

```{r echo=FALSE, out.height=250}
knitr::include_graphics('https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-26-1.png')
```


---

# 1.4. Tipos de gráficos
### Boxplot

Datos inventados de salinidad en Bahía de Santa María diferencias en las estaciones muestreadas
```{r}
Salinidad<-c(38,39,38,37,36,40,38,36,35,38)
Mes<-c(1,2,3,4,5,6,7,8,9,10)
Estacion<-c(1,1,1,1,1,2,2,2,2,2)
BSM<-as.data.frame(Salinidad)
BSM$Mes<-Mes
BSM$Estacion<-as.factor(Estacion)
```

---

# 1.4. Tipos de gráficos
###  Boxplot

Gráfico de datos inventados de salinidad en Bahía de Santa María diferencias en las estaciones muestreadas.
```{r, fig.height=3, echo=TRUE, eval=FALSE}
ggplot(data = BSM, aes(x=Estacion, y = Salinidad, group=Estacion)) +
  geom_boxplot() #<<
```

```{r, fig.height =3, echo=FALSE, include=TRUE, eval=FALSE}
ggplot(data = BSM, 
       aes(x=Estacion, y = Salinidad, group=Estacion)) +
  geom_boxplot()
```

```{r echo=FALSE, out.height=250}
knitr::include_graphics('https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-29-1.png')
```


---

# 1.4. Tipos de gráficos
### Trayectorias

Datos inventados de un bobo café que tenemos datos de latitud y longitud.
```{r}
Latitud<-c(8,9,10,9,8,6,5,9,8,7,6,5) #eje x
Longitud<-c(5,6,7,6,5,4,3,4,5,6,7,5) #eje y
Bobos<-as.data.frame(Longitud)
Bobos$Latitud<-Latitud
```

---

# 1.4. Tipos de gráficos
### Trayectorias

Gráficos de datos inventados de un bobo café que tenemos datos de latitud y longitud.
```{r, fig.height=3, echo=TRUE, eval=FALSE}
ggplot(data = Bobos, 
       aes(x = Latitud, y = Longitud)) +
  geom_path() #<<
```

```{r, fig.height=4, echo=FALSE, include=TRUE, eval=FALSE}
ggplot(data = Bobos, aes(x = Latitud, y = Longitud)) +
  geom_path()
```

```{r echo=FALSE, out.height=250}
knitr::include_graphics('https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-31-1.png')
```

---

# 1.4. Tipos de gráficos
### Mapas

```{r}
library(rnaturalearth)
library(rnaturalearthdata)
```

```{r}
world <- ne_countries(scale = "medium", returnclass = "sf") # en clase sf
```

---

# 1.4. Tipos de gráficos
### Mapas

Coordenadas de Sinaloa approx. 20 grados Norte, 110 grados Oeste (Noroeste)
```{r, echo=TRUE, eval=FALSE}
ggplot()+
    geom_sf(data = world) + #<<
    coord_sf(xlim = c(-110, -105), ylim = c(20, 25), expand = FALSE) #<<
```

```{r, fig.height=3, echo=FALSE, include=TRUE, eval=FALSE}
ggplot()+
    geom_sf(data = world) + #<<
    coord_sf(xlim = c(-110, -105), ylim = c(20, 25), expand = FALSE)
```

```{r echo=FALSE, out.height=250}
knitr::include_graphics('https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-36-1.png')
```

---

class: title-slide, inverse, bottom
background-image: url(https://images.unsplash.com/photo-1559311648-addd6af95dd4?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80)
background-size: cover

# Su turno!

---


# 1.5. Ejercicios

```{r, echo=FALSE}
library(emo)
```

`r emo::ji("clock")`

Crea un gráfico de puntos con los datos de Diamantes `r emo::ji("diamond")`

- Carga los datos
```{r}
library(datos)
Diamantes<-datos::diamantes
```

- Rellena los espacios (*****) para crear un gráfico de puntos con el precio y el quilate de los diamantes.
```{r}
#ggplot(data=***, mapping=aes(x=***,y=***))+
#  geom_***()
```

Para los que tienen datos, puden  hacer sus propios graficos.

Para los que no tienen tidyverse o ggplot2: entren aqui [AllisonHorst- Learnr](https://allisonhorst.shinyapps.io/edge-of-the-tidyverse/#section-graphs-in-ggplot2)

---

class: title-slide, inverse, bottom
background-image: url(https://images.unsplash.com/photo-1503481766315-7a586b20f66d?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1335&q=80)
background-size: cover

# Pausa de 10 minutos....

.right[
Foto de [Unsplash](https://unsplash.com)
]

---

# 1.5. Ejercicios

## Respuesta
```{r, echo=TRUE, eval=FALSE}
ggplot(data=Diamantes, mapping=aes(x=precio,y=quilate))+
  geom_point()
```


---

class: title-slide, inverse, bottom
background-image: url(https://images.unsplash.com/photo-1525909002-1b05e0c869d8?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=675&q=80)
background-size:cover

# 2. Estéticas

---

#2.1. Estéticas 
### Datos
```{r, eval=FALSE}
library(datos)
Pingus<-datos::pinguinos
```

---

#2.1. Estéticas 
### Colores de los símbolos

```{r, echo=TRUE, eval=FALSE}
ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, 
                                color=especie))+ #<<
  geom_point()
```

```{r, fig.height=3, echo=FALSE, include=TRUE, warning=FALSE, eval=FALSE}
ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, 
                                color=especie))+
  geom_point()
```

```{r echo=FALSE, out.height=300}
knitr::include_graphics('https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-43-1.png')
```

---

#2.1. Estéticas 
### Temas

```{r, echo=TRUE, eval=FALSE}
ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, color=especie))+
  geom_point()+
  theme_bw() #<<
```

```{r, fig.height=3, echo=FALSE, include=TRUE, warning=FALSE, eval=FALSE}
ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, color=especie))+
  geom_point()+
  theme_bw()
```

```{r echo=FALSE, out.height=300}
knitr::include_graphics('https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-50-1.png')
```

---

#2.1. Estéticas 
###  Fondos

```{r, echo=TRUE, eval=FALSE}
ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, color=especie))+
  geom_point()+
  theme_bw()+
  theme(panel.background = element_rect(fill = 'darkblue'))#<<
```

```{r, fig.height=3, echo=FALSE, include=TRUE, warning=FALSE, eval=FALSE}
ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, color=especie))+
  geom_point()+
  theme_bw()+
  theme(panel.background = element_rect(fill = 'darkblue'))
```

```{r echo=FALSE, out.height=300}
knitr::include_graphics('https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-47-1.png')
```

---

#2.1. Estéticas 
### Modificar ejes

```{r, echo=TRUE, eval=FALSE}
ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, color=especie))+
  geom_point()+
  theme_bw()+
  xlab('Largo Pico')+ylab('Largo Aleta')#<<
```

```{r, fig.height=3, echo=FALSE, include=TRUE, warning=FALSE, eval=FALSE}
ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, color=especie))+
  geom_point()+
  theme_bw()+
  xlab('Largo Pico')+ylab('Largo Aleta')
```

```{r echo=FALSE, out.height=300}
knitr::include_graphics('https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-50-1.png')
```


---

#2.1. Estéticas 
### Tamaño de letras

```{r, echo=TRUE, eval=FALSE}
ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, color=especie))+
  geom_point()+
  theme_bw()+
  theme(axis.title = element_text(size=20)) #<<
```

```{r, fig.height=3, echo=FALSE, include=TRUE, warning=FALSE, eval=FALSE}
ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, color=especie))+
  geom_point()+
  theme_bw()+
  theme(axis.title = element_text(size=20))
```

```{r echo=FALSE, out.height=300}
knitr::include_graphics('https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-52-1.png')
```

---

#2.1. Estéticas 
### Leyendas

```{r, echo=TRUE, eval=FALSE}
ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, color=especie))+
  geom_point()+
  theme_bw()+
  theme(legend.position = "top") #<<
```

```{r, fig.height=3, echo=FALSE, include=TRUE, warning=FALSE, eval=FALSE}
ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, color=especie))+
  geom_point()+
  theme_bw()+
  theme(legend.position = "top")
```

```{r echo=FALSE, out.height=300}
knitr::include_graphics('https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-54-1.png')
```

---

# 2.2. Errores comunes
### Sintaxis

No poner el **+**
```{r}
#ggplot(data=Pingus, 
#       mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, color=especie))
#       geom_point()
```

--

Poner el **+** en el lugar incorrecto
```{r}
#ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, color=especie))
# +geom_point()
```

--

No cerrar paréntesis

```{r}
#ggplot(data=Pingus, mapping=aes(x=largo_pico_mm,y=largo_aleta_mm, color=especie)+
# geom_point()
```
Falta un parentesis despues de especie.


---

class: title-slide, inverse, bottom
background-image: url(https://images.unsplash.com/photo-1559311648-addd6af95dd4?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80)
background-size: cover

### Su turno

a) Intenten crear un gráfico solos y los asistiré si tienen dudas  

b) Les daré instrucciones

---

### Su turno

Creen un gráfico de puntos con los datos de diamantes
```{r}
Diamantes<-datos::diamantes
```

Grafiquen el *precio* por el *quilate* y cambien el color de lo puntos de acuerdo al *corte* y cambien el nombre en el eje x por *Precio en dolares* y el eje y por *kt*.
```{r}
#ggplot(data=***,mapping=aes(x=***, y=***, color=****))+
#  geom_****()+
#  theme_bw()+
#  xlab("**")+ylab("***")
```

---

### Su turno

Código  
```{r, echo=TRUE, eval=FALSE}
ggplot(data=Diamantes,mapping=aes(x=precio, y=quilate, color=corte))+
  geom_point()+
  theme_bw()+
  xlab("Precio en pesos")+ylab("kt")
```

Gráfico  
```{r, fig.height=3, echo=FALSE, include=TRUE, eval=FALSE}
ggplot(data=Diamantes,mapping=aes(x=precio, y=quilate, color=corte))+
  geom_point()+
  theme_bw()+
  xlab("Precio en pesos")+ylab("kt")
```

```{r echo=FALSE, out.height=350}
knitr::include_graphics('https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-66-1.png')
```

---

class: title-slide, inverse, bottom
background-image: url(https://images.unsplash.com/photo-1579619597328-142326e07210?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1349&q=80)
background-size: cover

# Ya esta tarde, no?

.right[
Foto de [Unsplash](https://unsplash.com)
]

---

# 3.1. Exportarlo
### Consejos

Pero primero sepan que pueden guardar su gráfico como objeto y agregar estéticas a su gráfico base con el signo de +
```{r, echo=TRUE, eval=FALSE}
MiGrafico<-ggplot(data=Diamantes,mapping=aes(x=precio, y=quilate, color=corte))+
  geom_point()+
  theme_bw()+
  xlab("Precio en pesos")+ylab("kt")
```

```{r, fig.height=3, echo=TRUE, eval=FALSE}
MiGrafico+ #<<
  theme_bw()+
  theme(legend.position = "top")
```


---

# 3.2. Exportarlo
### Consejos

También sepan que no necesitan escribir todo (data, mapping se puede omitir) si siguen un orden.
```{r, echo=TRUE, eval=FALSE}
MiGrafico<-ggplot(Diamantes,
                  aes(x=precio, y=quilate, color=corte))+
  geom_point()+
  theme_bw()+
  xlab("Precio en pesos")+ylab("kt")
MiGrafico
```

---

# 3.2 Exportarlo

Manual:

Esquina inferior derecha.
En la pestaña de Plot.
Picar en export. 

Con código:

Elige el directorio donde quieres guardar tu gráfico.
```{r, eval=FALSE}
ResultsFolder<-here::here("3Results")
```
Si no usan here, escriban la direccion completa del Folder.

```{r, eval=FALSE}
MiGrafico
ggsave("MiGrafico.jpg",
       path = ResultsFolder, #tambien la pueden escribir aqui
       width = 16, height = 8, 
       units = "in") #puede ser centimetros
```
Se puede agregar incluso el dpi = 300 de acuerdo a lo que les pidan en las revistas.

---

# 4. Otras posibilidades

---
# 4.1. Animaciones

Los gráficos se pueden animar.

```{r, eval=FALSE}
library(gganimate)
library(plotly)
```

```{r, echo=FALSE, out.height=350}
knitr::include_graphics('https://www.datanovia.com/en/wp-content/uploads/dn-tutorials/r-tutorial/images/transition_time.gif')
```

---

# 4.2. Inspiración

[Visualizaciones en R](https://www.notion.so/Data-Viz-Bookmarks-dc01718020bd4fd6a8a4ca80e6bce933) by Silvia Canelón (@spcanelon) and Tom Mock (@thomas_mock)
Si hay tiempo revisemos esto 

Twitter: #tidytuesday #DatosDeMiercoles, #30díasdegráficos

[RGraphGallery](https://www.r-graph-gallery.com/)

[DataToViz](https://www.data-to-viz.com/)

[Colores](https://coolors.co/)

---


# 4.3. Ayuda
## Cheat sheet

Help>CheatSheets>Data Visualization with ggplot

---

# 4.3. Errores comunes
### Orden

No tener los datos ordenados.  
Noten que para definir los ejes usamos columnas, por lo tanto es importante que tengan sus datos ordenados de esta manera.  
Si no los tienen asi por ahora, lo veremos mas adelante en 'ordenar mis datos'.  

```{r echo=FALSE, out.width=600}
knitr::include_graphics('https://r4ds-en-espaniol.netlify.app/diagrams_w_text_as_path/es/visualization-stat-bar.svg')
```
  
De libro [R4DS](https://r4ds-en-espaniol.netlify.app/) 


---


class: title-slide, inverse, bottom
background-image: url(https://images.unsplash.com/photo-1527345931282-806d3b11967f?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&ixlib=rb-1.2.1&auto=format&fit=crop&w=1267&q=80)
background-size: cover

# Recapitulando

1. Gráficos con ggplot.  
2. Tipos de gráfico.
3. Temas.  
4. Nombres en los ejes.  
5. Colores.  
6. Tamaño letras. 
5. Inspiración.  


---

# 5. Materiales extra

---

# 5.1. Mapa y Scatterpie
### Mapa con puntos en diferentes tamanios.

Ejemplo de: [mapa con scatterpies](https://cran.r-project.org/web/packages/scatterpie/vignettes/scatterpie.html)

1- Crear datos
```{r}
set.seed(123)
long <- rnorm(50, sd=100)
lat <- rnorm(50, sd=50)
d <- data.frame(long=long, lat=lat)
d <- with(d, d[abs(long) < 150 & abs(lat) < 70,])
n <- nrow(d)
d$region <- factor(1:n)
d$A <- abs(rnorm(n, sd=1))
d$B <- abs(rnorm(n, sd=2))
d$C <- abs(rnorm(n, sd=3))
d$D <- abs(rnorm(n, sd=4))
d[1, 4:7] <- d[1, 4:7] * 3
head(d)
```
No se asusten pero lo anterior es solo para que tengan un dataframe que tenga las mismas caracteristicas.

---

# 5.1. Mapa y Scatterpie
#### Paquetes

Si no tienen estos paquetes hay que instalarlos.
```{r}
library(ggplot2)
library(scatterpie)
```

---

# 5.1. Mapa y Scatterpie
#### Mapa con puntos en diferentes tamanios.

2- Grafiquen los 'scatterpie'
```{r, eval=FALSE}
ggplot() + geom_scatterpie(aes(x=long, y=lat, group=region), data=d,
cols=LETTERS[1:4]) + coord_equal()
```

```{r, echo=FALSE, out.height=350}
knitr::include_graphics('https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-88-1.png')
```

---

# 5.1. Mapa y Scatterpie
#### Mapa con puntos en diferentes tamanios.

3- Modificar el tamanio de los 'pies'
```{r, eval=FALSE}
d$radius <- 6 * abs(rnorm(n))
p <- ggplot() + geom_scatterpie(aes(x=long, y=lat, 
                                    group=region, r=radius), 
                                data=d,cols=LETTERS[1:4], color=NA) +
  coord_equal()
```


---

# 5.1. Mapa y Scatterpie
#### Mapa con puntos en diferentes tamanios.

4- Esto agrega como una leyenda como referencia del tamanio del pie.
```{r, eval=FALSE}
p + geom_scatterpie_legend(d$radius, x=-140, y=-70)
```

```{r, echo=FALSE, out.height=350}
knitr::include_graphics('https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-90-1.png')
```


---

# 5.1. Mapa y Scatterpie
#### Mapa con puntos en diferentes tamanios.

5- Agregar el mapa de fondo
```{r, eval=FALSE}
world <- map_data('world')
p <- ggplot(world, aes(long, lat)) +
    geom_map(map=world, aes(map_id=region), fill=NA, color="black") +
    coord_quickmap()
p + geom_scatterpie(aes(x=long, y=lat, group=region, r=radius),
                    data=d, cols=LETTERS[1:4], color=NA, alpha=.8) +
    geom_scatterpie_legend(d$radius, x=-160, y=-55)
```

```{r, echo=FALSE, out.height=350}
knitr::include_graphics('https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/unnamed-chunk-91-1.png')
```

---

# 5.1. Mapa y Scatterpie


Para leer más:

[Básicos para mapas](https://www.r-spatial.org//r/2018/10/25/ggplot2-sf-2.html)

[Otro ejemplo de mapa con scatterpies](https://www.r-bloggers.com/2018/01/plot-pie-charts-of-racial-composition-in-largest-metro-areas-on-a-map-in-r/amp/)

---

# 5.2. Grafico de barras con desviacion estandar.

Creditos: [RGraphGallery](https://www.r-graph-gallery.com/4-barplot-with-error-bar.html)

1- Cargar paqueteria
```{r}
library(ggplot2)
```

2- Crear un data frame inventado.
```{r}
data <- data.frame(
  name=letters[1:5],
  value=sample(seq(4,15),5),
  sd=c(1,0.2,3,2,4))
```

---

# 5.2. Grafico de barras con desviacion estandar.

3- Graficar
```{r, eval=FALSE}
ggplot(data) +
  geom_bar( aes(x=name, y=value), 
            stat="identity", 
            fill="skyblue", alpha=0.7) +
  geom_errorbar(aes(x=name, ymin=value-sd, ymax=value+sd), width=0.4, colour="orange", alpha=0.9, size=1.3)
```

```{r, echo=FALSE, out.height=250}
knitr::include_graphics('https://www.r-graph-gallery.com/4-barplot-with-error-bar_files/figure-html/thecode-1.png')
```
