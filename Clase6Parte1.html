<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Clase 4</title>
    <meta charset="utf-8" />
    <meta name="author" content="Miriam Lerma" />
    <script src="Clase8Parte1_files/header-attrs-2.6/header-attrs.js"></script>
    <link href="Clase8Parte1_files/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link href="Clase8Parte1_files/remark-css-0.0.1/chocolate-fonts.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Clase 4
## Rmardown
### Miriam Lerma
### Marzo 2021

---


# Intro

La clase es de 2 horas.  
- Teoria: Rmd que es.  
- Practica: Exportar un Rmd.  




--

## Ustedes

- Conocimientos básicos de R (saben abrirlo, cargar paquetes y datos, saben hacer algunas operaciones y graficos).  

- Quieren compartir sus avances con otros.  
- Quieren tener un buen seguimiento para ustedes entender que hicieron y poder re-hacer sus analisis con otros datos en el futuro.  

---

class: title-slide, inverse, bottom
background-image: url(https://images.unsplash.com/photo-1503694978374-8a2fa686963a?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1350&amp;q=80)
background-size: cover

# Rmd

---

# 1. RMarkdown

Rmarkdown es muy conveniente porque podemos crear htmls o documentos word, e incluso presentaciones...
...de hecho esta es una presentación en Rmd.

Hay **muchas** maneras de trabajar en Rmd. Solo cubrire algunas.

---

## Creditos

- Material de Rmarkdown.  
[RMarkdown por RStudio](https://rmarkdown.rstudio.com/lesson-2.html).  
[Rmarkdown por Yihui xie](https://bookdown.org/yihui/rmarkdown/).    

- En español:  
[RLadiesBuenosAires](https://www.youtube.com/watch?v=zENhUzKfCws)

- En ingles:    
[RLadiesOslo](https://www.youtube.com/watch?v=Xn5AmUf7gDQ&amp;t=6552s)  
[RLadiesFreiburg](https://www.youtube.com/watch?v=H91WSwALx1A&amp;t=3777s)  
[RLadiesJohannesburgo](https://www.youtube.com/watch?v=tSrf4n7DFYI&amp;t=55s)  

---

## 1. Teoria

Markdown es texto plano...  
...algo asi como lo que escriben en un block de notas.

La ventaja de Rmd es que puedes incluir mucho texto e incluso se pueden escribir tesis, libros, articulos, paginas web y presentaciones dentro de **RStudio**.

--

Lo que lo hace especial es que en Rmd (RMarkdown) ademas puedes tener:  
- Codigo y los resultados de ese codigo sin tener que salir de RStudio.

---


## 1.2. Porque usar Rmd?

Al generar un output, la ventaja es que puedes leer lo que dice el documento, aunque no tengas R.  

Por ejemplo: ustedes estan leyendo esta presentacion.  


Ademas puedo poner:    
Aqui quiero cargar una libreria y ver el el numero de observaciones  

```r
library(datos)
Pingus&lt;-pinguinos
nrow(Pingus) #numero de observaciones
```

```
## [1] 344
```
Podemos tener resultados de alguna funcion tambien sin tener que mostrar el codigo y sin tener que salir y copiar los resultados en un documento word.

---

## 1.3. Como abrir un Rmd.


File&gt;NewFile&gt;RMarkdown

Se vera algo asi:  

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/RmdNew.JPG" height="400" /&gt;

---

## 1.4. Diferencias entre R y Rmd

Diferencias entre R y Rmd:
- chunks 
- knit  
- yaml  
- output  

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/RmdNew.JPG" height="400" /&gt;

---

## 1.5. Knitr

Cuando usamos knit se guardan los cambios.    

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/knitr.jpg" height="400" /&gt;

---

## 1.6. Chunks

Las partes grises son los chunks.  

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/RmdNew.JPG" height="400" /&gt;

Podemos correr la linea del codigo al darle a la flechita verde.  
Podemos agregar nuevas lineas de codigo usando **Ctrl+Alt+I** o usando 'back ticks': ` ` ` {r} y luego ` ` `.  
El codigo de R tiene que estar dentro de estas partes grises para que se ejecuten. 

---

## 1.6. Chunks

- **echo** si se muestra el codigo en el output.  
- **eval** si se ejecuta el codigo o no.  
- **warning** evita que aparezcan las advertencias.  
- **message** evita que aparezcan las advertencias, por ejemplo cuando cargamos librerias.  

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/echo.jpg" height="400" /&gt;

Leer mas: [Chunk options](https://rmarkdown.rstudio.com/lesson-3.html)

---

## 1.6. Chunks

**Buenas practicas**: Ponle nombres a tus code chunks (despues del {  y la r) para detectar donde te equivocaste.  
Los nombres son sin espacio. Esto porque si tenemos algun problema sabemos donde occurio el problema.   

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/echo.jpg" height="400" /&gt;

---

## 1.7. YAML

YAML significa “YAML Ain’t Markup Language”.  
Es una serializacion que es leible para los humanos.  

Por default aparece: title, author, date, **output**.  
Se pueden incluir muchas cosas alli, por hoy nos vamos a enfocar a cambiar el output, porque de acuerdo a lo que le pongamos podemos generar reportes en diferentes formatos.  

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/YAML.JPG" height="400" /&gt;

---

## 1.7. YAML

Cuando pasa por word y pdf usa sintaxis de LateX.  
Lo "traduce" usando **PanDoc**.  

&lt;img src="https://d33wubrfki0l68.cloudfront.net/61d189fd9cdf955058415d3e1b28dd60e1bd7c9b/b739c/lesson-images/rmarkdownflow.png" width="400" /&gt;


**Nota**: si tienen problemas en renderizar (knit) es probable que tenga errores que no pueden ser traducidos. 
KnitR te va a decir donde esta el error.

---


## 1.7. Knit

Es el boton que aparece en la parte de arriba, es como una bolita azul con agujas de tejer.  
knitr una herramienta que permite la generación de informes dinámico usando R.   

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/knitr.jpg" height="400" /&gt;

---


## 1.7. Outputs  

Pros y contras de usar uno o el otro.  

- **word**: lo podemos compartir mas facilmente, y muchas revistas requieren word.  
- **pdf**: compartir mas facilmente, no tan facil de editar.  
- **html**: se puede incluir toda clase de contenidos.  ⭐ 

Para cambiarlo:    
&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/Outputs.JPG" height="400" /&gt;


---

## 1.8. Outputs  

En html podemos incluir animaciones:  

&lt;img src="https://www.datanovia.com/en/wp-content/uploads/dn-tutorials/r-tutorial/images/transition_time.gif" height="300" /&gt;

... y muchas otras cosas como mapas dinamicos.


---


## 1.8. Texto

En las partes en blanco, en general se escribe igual que en cualquier programa. 

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/RmdNew.JPG" height="400" /&gt;


---

## 1.8. Texto

Para poner:  
*cursivas* con un asterisco antes y uno despues.  
**negritas** con dos asteriscos antes y uno despues.  
***cursiva y negritas*** con tres asteriscos antes y uno despues.  

&lt;img src="https://d33wubrfki0l68.cloudfront.net/59f29676ef5e4d74685e14f801bbc10c2dbd3cef/c0688/lesson-images/markdown-1-markup.png" height="400" /&gt;

Mas opciones: [Texto en Rmd](https://rmarkdown.rstudio.com/lesson-8.html)

---

## 1.8. Titulos

Si queremos poner titulos usar #. 
- Para titulo de primer nivel #.  
- Para titulo de segundo nivel ##.  
- Para titulo de tecer nivel ###.  

&lt;img src="https://d33wubrfki0l68.cloudfront.net/59f29676ef5e4d74685e14f801bbc10c2dbd3cef/c0688/lesson-images/markdown-1-markup.png" height="400" /&gt;

---

## 1.8. Navegar con titulos

Navegar usando los puntitos junto al compas.  
CONTROL+SHIFT+O aparecen los titulos para navegar en nuestro lado derecho.  

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/Navegar.JPG" height="400" /&gt;

---

## 1.9. Imagenes

Para agregar imagenes desde mi computadora se usa signo de admiracion ! y corchetes [ , ] y dentro la direccion de la imagen.  
Por ejemplo:  
- ![ pie de foto ] (Imagenes/Foto.jpg)

Desde internet tambien se puede usar:  
- knitr::include_graphics('') con el enlace de la imagen entre parentesis.  


&lt;img src="https://images.unsplash.com/photo-1523224339316-5e4ae73929cc?ixid=MXwxMjA3fDB8MHxzZWFyY2h8MXx8bWF6YXRsYW58ZW58MHx8MHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=500&amp;q=60" height="200" /&gt;

---

## 1.9. Figuras

Si creamos un plot con ggplot en un chunk y queremos ajustar el tamanio, hay que definir dentro de los { }:
- fig.height  
- fig.width  

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/Figuras.JPG" height="400" /&gt;

---

## 1.10. Tablas

Hay muchos paquetes para incluir tablas.  
El basico es knitr::kable function dentro de su **chunk**.   

&lt;img src="https://d33wubrfki0l68.cloudfront.net/09467251a219c3c6b2dae2bf1367e5736a9ef78c/feeea/lesson-images/tables-1-kable.png" height="350" /&gt;

---

## 1.12. Idioma

Tools&gt;Project Options&gt;Spelling&gt;Main lenguage **cambiar a Spanish**

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/Lenguage.JPG" height="400" /&gt;

---

## 1.13. Ortografia

Edit&gt;Spellchecking&gt;F7  

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/Ortografia.JPG" height="400" /&gt;

---

## 1.14. R vs Rmd

**Consideraciones:  **  
Rmd tiene diferente comportamiento que R
- Rmarkdown corre en un enviroment limpio.  
- Todas tus variables tienen que esta dentro de tu markdown.
- De hecho si tienes cosas en tu environment no interesa, tienen que estar dentro del codigo.  
- Esto asegura que es reproducible, si no tiene continuidad no corre. 

---

# 2. Ejercicios
## 2.1. Abrir

File&gt;NewFile&gt;RMarkdown
&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/RmdNew.JPG" height="400" /&gt;

---

## 2.2. YAML
Cambiar el YAML:  
- Fecha de hoy  
- Sus nombres  

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/YAML.JPG" height="400" /&gt;

---

## 2.3. Knitr

Picarle knit.  
&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/knitr.jpg" height="400" /&gt;

---

## 2.4. Outputs

Cambiar output a:  
- word_document y knit
- pdf_document y knit
- html_document y knit

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/YAML.JPG" height="400" /&gt;

---

## 2.5. Titulos y texto.  
Borra todo lo que esta en tu Rmd EXCEPTO el YAML.  
&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/YAML.JPG" height="400" /&gt;

---

## 2.5. Titulos y texto

Copia y pega y **agrega un # en cada titulo.**  
Pon dos espacios donde quieras que pase a la siguiente linea.  

- Introduccion  
Aqui escribire mi introduccion  
- Metodos  
Aqui escribire mis metodos  
- Analisis preliminares  
Aqui escribire mis analisis  
- Resultados  
Aqui escribire mis resultados  
- Discusion  
Aqui escribire mis discusion   

---

## 2.5. Titulos y texto
Dale click al simbolo (hide document outline) o usando Ctrl+Shift+O  

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/Navegar.JPG" height="300" /&gt;

---

## 2.6. Cursivas y negritas

Escribe en tu introduccion:

'Voy a cargar datos de pinguinos'

- Pon dos **asteriscos** antes y despues de la palabra 'pinguinos'.  
- Pon un **asterisco** antes y depues de la palabras 'datos'.  
- Pon tres **asteriscos** antes y despues de la palabra 'cargar'.

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/Texto.jpg" height="300" /&gt;

---

## 2.7. Chunks

- Escribir codigo dentro de los **chunks** para cargar sus datos.  
- Escribir codigo para ver cuantas observaciones tenemos.  
- Escribir codigo para obtener promedios.  

Dale click al 'play' o triangulito verde para ejecutar.  


Asi cargo mis datos.  

```r
Pingus&lt;-datos::pinguinos
```

Asi veo mi numero de observaciones.  

```r
ObservacionesPingus&lt;-nrow(Pingus)
```

---

## 2.7. Chunks

  
Asi calculo promedios por sexo.  

```r
Pingus %&gt;%
  group_by(sexo)%&gt;%
  summarize(promedios=mean(masa_corporal_g))
```

```
## # A tibble: 3 x 2
##   sexo   promedios
## * &lt;fct&gt;      &lt;dbl&gt;
## 1 hembra     3862.
## 2 macho      4546.
## 3 &lt;NA&gt;         NA
```
Nota que en Rmd, te aparecen los resultados debajo de tu code chunk.  

---

## 2.8. Figuras

- Crea una figura.


```r
ggplot(data = Pingus, aes(x = largo_aleta_mm)) +
  geom_histogram(aes(fill = especie),
                 alpha = 0.5,
                 position = "identity") +
  scale_fill_manual(values = c("darkorange","purple","cyan4")) +
  theme_minimal() +
  labs(x = "Largo de la aleta (mm)",
       y = "Frequency",
       title = "Longidudes de la aleta de pinguinos")
```

```
## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.
```

```
## Warning: Removed 2 rows containing non-finite values (stat_bin).
```

![](Clase8Parte1_files/figure-html/unnamed-chunk-34-1.png)&lt;!-- --&gt;

---
## 2.8. Figuras

- Despues, cambia el tamanio dentro de {r}. Agrega fig.height=3.  

&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/Figuras.JPG" height="300" /&gt;

- Para hacer zoom debajo de tu chunk aparece un cuadrito con una flechita.  

---

## 2.9. Tablas

Usar argumento knitr :: kable

En un chunk creas tu tabla.

```r
TablaPinguinos&lt;-Pingus %&gt;%
  group_by(sexo)%&gt;%
  summarize(promedios=mean(masa_corporal_g))
```

En otro chunk pon el siguiente codigo:  

```r
knitr::kable(TablaPinguinos)
```



|sexo   | promedios|
|:------|---------:|
|hembra |  3862.273|
|macho  |  4545.685|
|NA     |        NA|

---

## 2.10. Opciones

- Opcion 1: Compartir todo.  
Mando documento Rmd, tal cual y le pican a las partes grises en el boton verde.  

- Opcion 2: Compartir instrucciones.  
Mando el documento Rmd en html y pueden copiar las instrucciones.  

- Opcion 3:  Escribir reportes o articulos.  
Exportar sin codigo.

Cambiar echo a TRUE o cambiar echo a FALSE.  
Mostrara o no el codigo.  
&lt;img src="https://raw.githubusercontent.com/MiriamLL/Curso_CIAD/main/Figuras/echo.jpg" height="400" /&gt;
Denle en knit.

---

## 2.11. Mas opciones:

Help&gt;Markdown Quick Reference

Veamos juntos donde obtener informacion.
&lt;img src="https://d33wubrfki0l68.cloudfront.net/46ba24a18406d82a43000fe7a11546f7f145374d/c5692/lesson-images/cheatsheets-2-path.png" height="400" /&gt;

[Cheatsheet](https://rstudio.com/wp-content/uploads/2016/03/rmarkdown-cheatsheet-2.0.pdf?_ga=2.240247812.66492107.1614708075-36514926.1579182721)

---

class: title-slide, inverse, bottom
background-image: url(https://images.unsplash.com/photo-1503694978374-8a2fa686963a?ixid=MXwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHw%3D&amp;ixlib=rb-1.2.1&amp;auto=format&amp;fit=crop&amp;w=1350&amp;q=80)
background-size: cover


# Recapitulando

1. Que es Rmd y como funciona.
2. Como crear diferentes outputs usando Rmd.

---
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
